"
============================================
             Code Generation
============================================
"
⟨CG⟩⇐

prologue ← "
// Generated by bqn-lisp codegen
module {
"

epilogue ← "
}
"

# Constants and functions are defined at the module level
consts ← ""
functions ← ""
funcmain ← "
func.func @bl_main() -> i32 {
"
global ← 0

LowerStmt ← {𝕊stmt:
  type ← 1⊑stmt
  
}

CG ← {outfile𝕊tree:
  LowerStmt ¨tree
  funcmain ∾↩ "
  %0 = llvm.mlir.constant(1 : i32) : i32
  return %0 : i32
}
"
  outfile •FChars prologue∾consts∾functions∾funcmain∾epilogue
}